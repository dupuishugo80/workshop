{% extends 'base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
<style>
    .example-wrapper {
        margin: 1em auto;
        max-width: 800px;
        width: 95%;
        font: 18px/1.5 sans-serif;
    }
    .example-wrapper code {
        background: #F5F5F5;
        padding: 2px 6px;
    }
    table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        font-size: 18px;
        text-align: left;
    }
    table th, table td {
        padding: 12px;
        border: 1px solid #ddd;
    }
    table th {
        background-color: #f2f2f2;
    }
    table tr:nth-child(even) {
        background-color: #f9f9f9;
    }
</style>

<div class="example-wrapper">
    <h1>Bienvenue sur ta page personnelle</h1>

    <!-- Tableau des logs de l'utilisateur -->
    <table id="logsTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>URL</th>
                <th>Type d'Alerte</th>
                <th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
                <tr>
                    <td>{{ log.id }}</td>
                    <td>{{ log.url }}</td>
                    <td>{{ log.warningType }}</td>
                    <td>{{ log.date|date('Y-m-d H:i:s') }}</td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4">Aucun log trouvé pour cet utilisateur.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Intégration de DataTables -->
<script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function() {
        $('#logsTable').DataTable({
            "order": [[ 0, "asc" ]]  // Trier par ID par défaut
        });
    });
</script>
{% endblock %}
